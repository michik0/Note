# 准确性问题

## 集团员工更新人数占比

### 存量模块更改人数占比
```sql
with t as(
	select create_by_, inst_status_
	from w_emp_self_info_01
	union all
	select create_by_, inst_status_
	from w_emp_self_info_02
	union all
	select create_by_,  inst_status_
	from w_emp_self_info_04
	union all
	select create_by_, inst_status_
	from w_emp_self_info_06
	union all
	select create_by_, inst_status_
	from w_emp_self_info_07
)
-- 250 为上线总人数
select round(count(distinct t.create_by_) * 100 / 250, 2) || '%'
from t inner join jpaas_user.os_user u on t.create_by_ =  u.user_id_ and u.status_ in ('0', '1', '2')
where inst_status_ = 'SUCCESS_END'
```

### 增量模块更新人数占比
```sql
with t as(
	select create_by_, inst_status_
	from w_emp_edit_patents
	union all
	select create_by_, inst_status_
	from w_emp_add_patents
	union all
	select create_by_, inst_status_
	from w_emp_pro_tit_cer
	union all
	select create_by_, inst_status_
	from w_emp_pro_qua_cer
	union all
	select create_by_, inst_status_
	from w_emp_self_job_his_form
	union all
	select create_by_, inst_status_
	from w_emp_project_info
	union all
	select create_by_, inst_status_
	from w_emp_edu_info
	union all
	select create_by_, inst_status_
	from w_emp_ojt_his
	union all
	select create_by_, inst_status_
	from w_emp_reward_info_add
	union all
	select create_by_, inst_status_
	from w_emp_reward_info_edit
)
-- 250 为上线总人数
select round(count(distinct t.create_by_) * 100 / 250, 2) || '%'
from t inner join jpaas_user.os_user u on t.create_by_ =  u.user_id_ and u.status_ in ('0', '1', '2')
where inst_status_ = 'SUCCESS_END'
```

### 增量模块新增操作人数占比
```sql
with t as(
  select create_by_, inst_status_
  from w_emp_add_patents
  union all
  select create_by_, inst_status_
  from w_emp_pro_tit_cer
  where type = 'ADD'
  union all
  select create_by_, inst_status_
  from w_emp_pro_qua_cer
  where type = 'ADD'
  union all
  select create_by_, inst_status_
  from w_emp_self_job_his_form
  where etype = 'add'
  union all
  select create_by_, inst_status_
  from w_emp_project_info
  where edittype = 'add'
  union all
  select create_by_, inst_status_
  from w_emp_edu_info
  where type = 'ADD'
  union all
  select create_by_, inst_status_
  from w_emp_ojt_his
  where type = 'ADD'
  union all
  select create_by_, inst_status_
  from w_emp_reward_info_add
)
-- 250 为上线总人数
select round(count(distinct t.create_by_) * 100 / 250, 2) || '%'
from t inner join jpaas_user.os_user u on t.create_by_ =  u.user_id_ and u.status_ in ('0', '1', '2')
where inst_status_ = 'SUCCESS_END'
```

### 增量模块更改操作人数占比
```sql
with t as(
  select create_by_, inst_status_
  from w_emp_add_patents
  union all
  select create_by_, inst_status_
  from w_emp_pro_tit_cer
  where type = 'EDIT'
  union all
  select create_by_, inst_status_
  from w_emp_pro_qua_cer
  where type = 'EDIT'
  union all
  select create_by_, inst_status_
  from w_emp_self_job_his_form
  where etype = 'edit'
  union all
  select create_by_, inst_status_
  from w_emp_project_info
  where edittype = 'edit'
  union all
  select create_by_, inst_status_
  from w_emp_edu_info
  where type = 'EDIT'
  union all
  select create_by_, inst_status_
  from w_emp_ojt_his
  where type = 'EDIT'
  union all
  select create_by_, inst_status_
  from w_emp_reward_info_add
)
-- 250 为上线总人数
select round(count(distinct t.create_by_) * 100 / 250, 2) || '%'
from t inner join jpaas_user.os_user u on t.create_by_ =  u.user_id_ and u.status_ in ('0', '1', '2')
where inst_status_ = 'SUCCESS_END'
```

### 全模块更新人数占比
```sql
with t as(
  select create_by_, inst_status_
  from w_emp_self_info_01
  union all 
  select create_by_, inst_status_
  from w_emp_self_info_02
  union all
  select create_by_, inst_status_
  from w_emp_self_info_04
  union all
  select create_by_, inst_status_
  from w_emp_self_info_06
  union all
  select create_by_, inst_status_
  from w_emp_self_info_07
  union all
  select create_by_, inst_status_
  from w_emp_edit_patents
  union all
  select create_by_, inst_status_
  from w_emp_add_patents
  union all
  select create_by_, inst_status_
  from w_emp_pro_tit_cer
  union all
  select create_by_, inst_status_
  from w_emp_pro_qua_cer
  union all
  -- 工作履历(待补充)
  select create_by_, inst_status_
  from w_emp_project_info
  union all
  select create_by_, inst_status_
  from w_emp_edu_info
  union all
  select create_by_, inst_status_
  from w_emp_ojt_his
  union all
  select create_by_, inst_status_
  from w_emp_reward_info_add
  union all
  select create_by_, inst_status_
  from w_emp_reward_info_edit
)
-- 250 为上线总人数
select round(count(distinct t.create_by_) * 100 / 250, 2) || '%'
from t inner join jpaas_user.os_user u on t.create_by_ =  u.user_id_ and u.status_ in ('0', '1', '2')
where inst_status_ = 'SUCCESS_END'
```

## 集团员工信息更新率

### 存量模块信息更改率
```sql
with t as(
  select create_by_, inst_status_
  from w_emp_self_info_01
  union all
  select create_by_, inst_status_
  from w_emp_self_info_02
  union all
  select create_by_, inst_status_
  from w_emp_self_info_04
  union all
  select create_by_, inst_status_
  from w_emp_self_info_06
  union all
  select create_by_, inst_status_
  from w_emp_self_info_07
)
-- 250 为上线总人数
select round(count(1) * 100 / (250 * 5), 2) || '%'
from t inner join jpaas_user.os_user u on t.create_by_ =  u.user_id_ and u.status_ in ('0', '1', '2')
where inst_status_ = 'SUCCESS_END'
```

### 增量模块信息更新率
```sql
with t as(
  select create_by_, inst_status_
  from w_emp_edit_patents
  union all
  select create_by_, inst_status_
  from w_emp_add_patents
  union all
  select create_by_, inst_status_
  from w_emp_pro_tit_cer
  union all
  select create_by_, inst_status_
  from w_emp_pro_qua_cer
  union all
  select create_by_, inst_status_
  from w_emp_self_job_his_form
  union all
  select create_by_, inst_status_
  from w_emp_project_info
  union all
  select create_by_, inst_status_
  from w_emp_edu_info
  union all
  select create_by_, inst_status_
  from w_emp_ojt_his
  union all
  select create_by_, inst_status_
  from w_emp_reward_info_add
  union all
  select create_by_, inst_status_
  from w_emp_reward_info_edit
)
select round(count(1) * 100 / 2181, 2) || '%'
from t inner join jpaas_user.os_user u on t.create_by_ =  u.user_id_ and u.status_ in ('0', '1', '2')
where inst_status_ = 'SUCCESS_END'
```

### 增量模块信息新增率
```sql
with t as(
  select create_by_, inst_status_
  from w_emp_add_patents
  union all
  select create_by_, inst_status_
  from w_emp_pro_tit_cer
  where type = 'ADD'
  union all
  select create_by_, inst_status_
  from w_emp_pro_qua_cer
  where type = 'ADD'
  union all
  select create_by_, inst_status_
  from w_emp_self_job_his_form
  where etype = 'add'
  union all
  select create_by_, inst_status_
  from w_emp_project_info
  where edittype = 'add'
  union all
  select create_by_, inst_status_
  from w_emp_edu_info
  where type = 'ADD'
  union all
  select create_by_, inst_status_
  from w_emp_ojt_his
  where type = 'ADD'
  union all
  select create_by_, inst_status_
  from w_emp_reward_info_add
)
select round(count(1) * 100 / 2181, 2) || '%'
from t inner join jpaas_user.os_user u on t.create_by_ =  u.user_id_ and u.status_ in ('0', '1', '2')
where inst_status_ = 'SUCCESS_END'
```

### 增量模块信息更改率
```mysql
with t as(
  select create_by_, inst_status_
  from w_emp_add_patents
  union all
  select create_by_, inst_status_
  from w_emp_pro_tit_cer
  where type = 'EDIT'
  union all
  select create_by_, inst_status_
  from w_emp_pro_qua_cer
  where type = 'EDIT'
  union all
  select create_by_, inst_status_
  from w_emp_self_job_his_form
  where etype = 'edit'
  union all
  select create_by_, inst_status_
  from w_emp_project_info
  where edittype = 'edit'
  union all
  select create_by_, inst_status_
  from w_emp_edu_info
  where type = 'EDIT'
  union all
  select create_by_, inst_status_
  from w_emp_ojt_his
  where type = 'EDIT'
  union all
  select create_by_, inst_status_
  from w_emp_reward_info_add
)
select round(count(1) * 100 / 2181, 2) || '%'
from t inner join jpaas_user.os_user u on t.create_by_ =  u.user_id_ and u.status_ in ('0', '1', '2')
where inst_status_ = 'SUCCESS_END'
```

### 学历信息模块信息更新率
```sql
with t as(
  select create_by_, inst_status_
  from w_emp_edu_info
)
select round(count(1) * 100 / 321, 2) || '%'
from t inner join jpaas_user.os_user u on t.create_by_ =  u.user_id_ and u.status_ in ('0', '1', '2')
where inst_status_ = 'SUCCESS_END'
```

### 职业资格模块信息更新率
```sql
with t as(
  select create_by_, inst_status_
  from w_emp_pro_qua_cer
)
select round(count(1) * 100 / 19, 2) || '%'
from t inner join jpaas_user.os_user u on t.create_by_ =  u.user_id_ and u.status_ in ('0', '1', '2')
where inst_status_ = 'SUCCESS_END'
```

### 职称证书模块信息更新率
```sql
with t as(
  select create_by_, inst_status_
  from w_emp_pro_tit_cer
)
select round(count(1) * 100 / 103, 2) || '%'
from t inner join jpaas_user.os_user u on t.create_by_ =  u.user_id_ and u.status_ in ('0', '1', '2')
where inst_status_ = 'SUCCESS_END'
```

# 已更新人员名单

```mysql
with t as(

  select create_by_, inst_status_

  from w_emp_edit_patents

  union all

  select create_by_, inst_status_

  from w_emp_add_patents

  union all

  select create_by_, inst_status_

  from w_emp_pro_tit_cer

  union all

  select create_by_, inst_status_

  from w_emp_pro_qua_cer

  union all

  select create_by_, inst_status_

  from w_emp_self_job_his_form

  union all

  select create_by_, inst_status_

  from w_emp_project_info

  union all

  select create_by_, inst_status_

  from w_emp_edu_info

  union all

  select create_by_, inst_status_

  from w_emp_ojt_his

  union all

  select create_by_, inst_status_

  from w_emp_reward_info_add

  union all

  select create_by_, inst_status_

  from w_emp_reward_info_edit

)

_-- 250 为上线总人数_

select distinct '''' ||user_no_ || ''','

from t inner join jpaas_user.os_user u on t.create_by_ =  u.user_id_ and u.status_ in ('0', '1', '2')

where inst_status_ = 'SUCCESS_END'
```