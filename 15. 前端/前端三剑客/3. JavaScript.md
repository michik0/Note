# JavaScript

## 1. JavaScript 介绍

### 1.1 JavaScript 是什么

#### 1.1.1 定义

是一种运行在客户端（浏览器）的编程语言，实现人机交互效果。

#### 1.1.2 作用

- 网页特效：监听用户的一些行为让网页作出对应的反馈
- 表单验证：针对表单数据的合法性进行判断
- 数据交互：获取后台的数据，渲染到前端
- 服务端编程：`node.js`

#### 1.1.3 组成

![image.png](https://raw.githubusercontent.com/michik0/notes-image/master/20230730223916.png)

>ECMAScript：

规定了JS基础语法核心知识。比如：变量、分支语句、循环语句、对象等等

>Web APIs：

DOM：操作文档，比如对页面元素进行移动、大小、添加删除等操作
BOM：操作浏览器，比如页面弹窗，检测窗口宽度、存储数据到浏览器等等

### 1.2 JavaScript 书写位置

![image.png](https://raw.githubusercontent.com/michik0/notes-image/master/20230730224730.png)

#### 1.2.1 内部 JavaScript

直接写在 html 文件里，用 script 标签包住

##### 规范

script标签写在 `</body>` 上面

##### 拓展

`alert('你好，js')` 页面弹出警告对话框

##### 注意事项

我们将 `<script>` 放在HTML文件的底部附近的原因是浏览器会按照代码在文件中的**顺序加载**HTML。

如果先加载的JavaScript期望修改其下方的HTML，那么它可能由于HTML尚未被加载而失效。

因此，将JavaScript代码放在HTML页面的底部附近通常是最好的策略。

#### 1.2.2 外部 JavaScript

代码写在以.js结尾的文件里

##### 语法

通过script标签，引入到html页面中。

```css
<body>
  <script src="js/my.js"></script>
</body>
```

##### 注意事项

1. **script标签中间无需写代码，否则会被忽略!**
2. 外部JavaScript会使代码更加有序，更易于复用，且没有了脚本的混合，HTML也会更加易读，因此这是个好的习惯。

#### 1.2.3 内联 JavaScript

代码写在标签内部

##### 语法

```html
<body>
	<button onclick="alert('hi')">按钮</button>
</body>
```

##### 注意

此处作为了解即可，但是后面vue框架会用这种模式

### 1.3 JavaScript 怎么写

#### 1.3.1 注释

##### 单行注释

- 符号：//
- 作用：//右边这一行的代码会被忽略

##### 块注释

- 符号：`/**/`
- 作用：在 `/*` 和 `*/` 之间的所有内容都会被忽略

#### 1.3.2 结束符

- **作用**：使用英文的；代表语句结束
- **实际情况**：实际开发中，可写可不写，浏览器可以自动推断语句的结束位置
- **现状**：在实际开发中，越来越多的人主张，书写 JavaScript 代码时省略结束符
- **约定**：为了风格统一，结束符要么每句都写，要么每句都不写

### 1.4 JavaScript 输入输出语法

#### 1.4.1 输出语法

##### document.write

`document.write`：向body内输出内容，如果输出的内容写的是标签，也会被解析成网页元素

```js
document.write('输出内容')
```

##### alert

`alert`：页面弹出警告对话框

```js
alert('弹窗内容')
```

##### console.log

`console.log`：控制台输出语法

```js
console.log('控制台打印')
```

#### 1.4.2 输入语法

`prompt`：显示一个对话框，对话框中包含一条文字信息，用来提示用户输入文字

```js
prompt('请输入您的姓名')
```

![image.png](https://raw.githubusercontent.com/michik0/notes-image/master/20230731205109.png)

### 1.5 代码执行顺序

- 按HTML文档流顺序执行JavaScript代码
- `alert()` 和 `prompt()` 它们会跳过页面渲染先被执行

## 2. 变量

### 2.1 变量是什么

- 白话：变量就是一个装东西的盒子。

- 通俗：变量是计算机中用来存储数据的“容器”，它可以让计算机变得有记忆。

>变量不是数据本身，它们仅仅是一个用于存储数值的容器。

### 2.2 变量的基本使用

#### 2.2.1 声明变量

要想使用变量，首先需要创建变量（也称为声明变量或者定义变量）

```js
let 变量名
```

声明变量有两部分构成：声明关键字、变量名（标识）

let 即关键字，所谓关键字是系统提供的专门用来声明（定义）变量的词语

#### 2.2.2 声明多个变量

多个变量中间用逗号隔开

```js
let 变量名1, 变量名2
```

#### 2.2.3 变量赋值

```js
变量名 = 值
```

定义了一个变量后，你就能够初始化它（赋值）。在变量名之后跟上一个 "="，然后是数值。

#### 2.2.4 声明并赋值

```js
let 变量名1 = 值1, 变量名2 = 值2
```

看上去代码长度更短，但并不推荐这样。为了更好的可读性，请一行只声明一个变量。

### 2.3 变量的本质

**内存**：计算机中存储数据的地方，相当于一个空间

变量本质：是程序在内存中申请的一块用来存放数据的小空间

![image.png](https://raw.githubusercontent.com/michik0/notes-image/master/20230731212600.png)

### 2.4 变量命名规则与规范

#### 2.4.1 规则

- 不能用关键字，关键字：有特殊含义的字符，JavaScript 内置的一些英语词汇，let、var、if、for 等
- 只能用下划线、字母、数字、$组成，且数字不能开头
- 字母严格**区分大小写**，如 Age 和 age 是不同的变量

#### 2.4.2 规范

- 起名要有意义
- 遵守小驼峰命名法，第一个单词首字母小写，后面每个单词首字母大写，例如：userName

### 2.5 拓展：let 和 var 的区别

在较旧的 JavaScript，使用关键字var来声明变量，而不是let。

var现在开发中一般不再使用它，只是我们可能再老版程序中看到它。 let为了解决var的一些问题。

var声明：

- 可以先使用在声明（不合理）
- var声明过的变量可以重复声明（不合理）
- 比如变量提升、全局变量、没有块级作用域等等

### 2.6 数组

数组(Array) ：一种将一组数据存储在单个变量名下的优雅方式

#### 2.6.1 声明语法

```js
// 方式一
let 数组名 = [数据1, 数据2, ..., 数据n]
// 方式二
let 数组名 = new Array(数据1, 数据2, ..., 数据n)
```

- 数组是按顺序保存，所以每个数据都有自己的编号
- 计算机中的编号从0开始
- 在数组中，数据的编号也叫索引或下标

#### 2.6.2 取值语法

```js
数组名[下标]
```

通过下标取数据，取出来是什么类型的，就根据这种类型特点来访问

#### 2.6.3 术语

- **元素**：数组中保存的每个数据都叫数组元素
- **下标**：数组中数据的编号
- **长度**：数组中数据的个数，通过数组的length属性获得

#### 2.6.4 新增元素

##### push()

push 方法将一个或多个元素添加到**数组的末尾**，并**返回该数组的新长度**

```js
arr.push(元素1, 元素2, ... 元素n])
```

##### unshift()

unshift 方法将一个或多个元素添加到**数组的开头**，并**返回该数组的新长度**

#### 2.6.5 删除元素

##### pop()

pop 方法从数组中删除**最后一个元素**，并返回该元素的值

```js
arr.pop()
```

##### shift()

shift 方法从数组中删除**第一个元素**，并返回该元素的值

```js
arr.shift()
```

##### splice()

splice 方法从数组中删除**指定个数**的元素，返回删除元素的值，如果多个将返回数组

```js
// 若省略个数，则删除到数组末尾
arr.splice(起始位置[，需要删除的元素个数])
```

#### 2.6.6 数组排序

##### 升序

```js
let arr = [5, 4, 3, 2, 1]
// 返回 [1, 2, 3, 4, 5]
arr.sort()
```

##### 降序

```css
let arr = [1, 2, 3, 4, 5]
// 返回 [5, 4, 3, 2, 1]
arr.sort(function (a, b) {
      return b - a
})
```

## 3. 常量

### 3.1 概念

使用 const 声明的变量称为"常量"

### 3.2使用场景

当某个变量**永远不会改变**的时候，就可以使用 const 来声明，而不是let

### 3.3 命名规范

和变量一致

### 3.4 常量使用

```js
const G = 9.8
```

### 3.5 注意

常量不允许重新赋值，声明的时候必须赋值（初始化）

### 3.6 小技巧

不需要重新赋值的数据使用 const

## 4. 数据类型

JS数据类型整体分为两大类：

- 基本数据类型
- 引用数据类型

### 4.1 基本数据类型

#### 4.1.1 number 数字型

JavaScript 中的正数、负数、小数等统一称为数字类型。

JS 是弱数据类型，变量到底属于哪种类型，只有赋值之后，我们才能确认

```js
// 整数
let age = 18
// 小数
let price = 88.99
```

>NaN

NaN 代表一个计算错误，它是一个不正确的或者一个未定义的数学操作所得到的结果

以下结果会造成 NaN：

```js
console.log('老师' - 2)
```

NaN是粘性的，任何对NaN的操作都会返回NaN

```js
console.log(NaN + 2)
```

#### 4.1.2 字符串类型

通过 单引号、双引号 或 反引号 包裹的数据都叫字符串

单引号和双引号没有本质上的区别，推荐使用单引号。

```js
let name = '小明'
let gender = "男"
let goods = `小米`
let str = ''
```

>注意事项

- 无论单引号或是双引号必须成对使用
- 单引号 / 双引号可以互相嵌套，但是不以自已嵌套自已
- 必要时可以使用转义符 `\` ，输出单引号或双引号

##### 字符串拼接

+运算符可以实现字符串的拼接。

```js
console.log('我的名字是:' + 'michiko')
console.log('我的年龄：' + '18')
```

##### 模版字符串

**以前：** 拼接字符串和变量，要拼接变量比较麻烦，需要用 `+` 号进行相连

**现在：** 只需要占位符即可

```js
document.write(`我今年${age}岁了`)
```

#### 4.1.3 boolean 布尔类型

表示肯定或否定时在计算机中对应的是布尔类型数据。它有两个固定的值 true 和 false ，表示肯定的数据用 true（真），表示否定的数据用false（假）。

```js
boolean success = true
```

#### 4.1.4 undefined 未定义类型

未定义是比较特殊的类型，只有一个值 undefined。

>什么情况出现未定义类型？

只声明变量，不赋值的情况下，变量的默认值为undefined，一般很少直接为某个变量赋值为undefined。

```js
// 此时 num 未进行赋值，所以此时 num 为 undefined
let num
```

#### 4.1.5 null 空类型

JavaScript 中的 null 仅仅是一个代表 "无"、"空" 或 "值未知" 的特殊值

```js
let num = null
```

>null 和 undefined 区别

- undefined 表示没有赋值
- null 表示赋值了，但是内容为空，官方解释：把 null 作为尚未创建的对象

### 4.2 检测数据类型

typeof 运算符可以返回被检测的数据类型。它支持两种语法形式：

```js
// 语法一
typeof x

// 语法二
typeof(x)
```

### 4.3 类型转换

#### 4.3.1 为什么需要类型转换

JavaScript是弱数据类型，赋值了才能知道属于什么类型。**使用表单、prompt获取过来的数据默认是字符串类型的，此时就不能直接简单的进行加法运算**

```js
console.log('10000' + '2000') // 输出结果：100002000
```

#### 4.3.2 隐式转换

某些运算符被执行时，系统内部自动将数据类型进行转换，这种转换称为隐式转换。

##### 规则

`+` 号两边只要有一个是字符串，都会把另外一个转成字符串

**除了 + 以外的算术运算符**，比如 `- */` 等都会把数据转成数字类型

##### 小技巧

- **+号作为正号解析可以转换成数字型**

```js
// 输出 number
console.log(typeof +'123')
```

- **任何数据和字符串相加结果都是字符串**

#### 4.3.3 显式转换（转换为数字）

编写程序时过度依靠系统内部的隐式转换是不严禁的，因为隐式转换规律并不清晰，大多是靠经验总结的规律。为了避免因隐式转换带来的问题，通常根逻辑需要对数据进行显示转换。

##### Number(数据)

- 转成数字类型
- 如果字符串内容里有非数字，转换失败时结果为NaN，即不是一个数字
- NaN也是number类型的数据，代表非数字

```js
Number('123')
```

###### +(数据)

可以将数据直接转换为number类型

```js
+('123')
```

###### parseInt(数据)

保留整数

```js
parseInt('12')
```

###### parseFloat(数据)

保留小数

```js
parseFloat('12.94')
```

## 5. 运算符

### 5.1 赋值运算符

赋值运算符能够对变量进行赋值

- `=`：将等号右边的值赋予给左边

```css
a = 1
```

- `+=`：将变量做加法后，重新复制给变量

```js
let a = 1;
// a变为2
a += 1
```

- `-=`：将变量做减法后，重新赋值给变量

```js
let a = 1;
// a变为0
a -= 0
```

- `*=`：将变量做乘法后，重新赋值给变量

```js
let a = 1;
// a变为2
a *= 2
```

- `/=`：将变量求商后，重新赋值给变量

```js
let a = 5;
// a变为2
a /= 2
```

- `%=`：将变量求余后，重新赋值给变量

```js
let a = 5;
// a变为1
a %= 2
```

### 5.2 一元运算符

根据所需表达式的个数，分为一元运算符、二元运算符、三元运算符，例如 `1+2` 为二元运算符

一元运算符：正负号

#### 5.2.1 一元运算符

- `++`：变量的值+1
- `--`：变量的值-1

#### 5.2.2 语法

```js
i++
i--
```

```js
++i
--i
```

**i++ 和 ++i 什么区别？**

- `i++` 先做运算，后进行自增
- `++i`：先做自增，后做运算。

```js
let i = 1
// 输出1，先打印log，后i++
console.log(i++)
// 输出3，先++i，后打印log
console.log(++i)
```

### 5.3 比较运算符

- `>`：左边是否大于右边
- `<`：左边是否小于右边
- `>=`：左边是否大于或等于右边
- `<=`：左边是否小于或等于右边
- `==`：左右两边值是否相等
- **`===`：左右两边是否类型和值都相等**
- `!==`：左右两边是否不全等

>字符串比较

字符串比较，是比较的字符对应的ASCII码，从左往右依次比较，如果第一位一样再比较第二位，以此类推

>注意

- **不同类型之间比较会发生隐式转换，最终把数据隐式转换转成number类型再比较。**
- **开发中判断是否相等，强烈推荐使用`===`**
- **NaN不等于任何值，包括它本身，涉及到NaN，结果都为false**
- **尽量不要比较小数，小数有精度问题**

### 5.4 逻辑运算符

逻辑运算符用来解决多重条件判断

| 符号 | 名称   | 特点                       |                              |
| ---- | ------ | -------------------------- | ---------------------------- |
| `&&` | 逻辑与 | 两边都为true，结果才为true |                              |
| `\|`                          | 逻辑或                       | 两边有一个为true，结果就为true|
| `!`  | 逻辑非 | 取反                       | true变为false，false变为true |

### 5.5 运算符优先级

| 优先级 | 运算符     | 顺序                      |
| ------ | ---------- | ------------------------- |
| 1      | 小括号     | ()                        |
| 2      | 一元运算符 | `++` `--` `!`             |
| 3      | 算数运算符 | 先 `*` `/` `%` 后 `+` `-` |
| 4      | 关系运算符 | `>` `>=` `<` `<=`         |
| 5      | 相等运算符 | `==`  `!=`  `===`  `!==`  |
| 6      | 逻辑运算符 | 先 `&&` 后 `\|\|`         |
| 7      | 赋值运算符 | `=`                       |
| 8      | 逗号运算符 | `,`                       |

## 6. 语句

### 6.1 表达式和语句

>表达式

表达式是可以被求值的代码， JavaScript引擎会将其计算出一个结果。

```js
x = 7
3+4
num++
```

>语句

语句是一段可以执行的代码，比如 `prompt()`，`alert()`

>语句和表达式的区别

- 表达式：因为表达式可被求值，所以它可以写在赋值语句的右侧，例如 `num=3+4`
- 语句不一定有值，所以有些语句不一定能用于赋值，比如 `alert()`，但是也有语句能够赋值，比如 `prompt()`

### 6.2 分支语句

分支语句可以让我们有选择性的执行想要的代码

#### 6.2.1 if 语句

if 语句有三种使用：单分支、双分支、多分支

##### 单分支

```js
if (条件) {
	// 满足条件的代码
}
```

- 括号内的条件为true时，进入大括号里执行代码
- 小括号内的结果若不是布尔类型时，会发生隐式转换转为布尔类型
- **`''`、`null`，`0` 为 false，其余都为 true**

##### 双分支

```js
if (条件) {
	// 满足条件的代码
} else {
	// 不满足条件的代码
}
```

##### 多分支

适合于有多个结果的时候，比如学习成绩可以分为：优良中差

```js
if (条件1) {
	// 代码1
} else if (代码2) {
	// 代码2
} else if (代码3) {
	// 代码3
} else {
	// 代码 n
}
```

- 先判断条件1，若满足条件1就执行代码1，其他不执行
- 若不满足则向下判断条件2，满足条件2执行代码2，其他不执行
- 若依然不满足继续往下判断，依次类推
- 若以上条件都不满足，执行else里的代码n

#### 6.2.2 三元运算符

比 if 双分支更简单的写法，可以使用三元表达式

##### 语法

```js
条件 ? 满足条件执行的代码 : 不满足条件执行的代码
```

##### 使用场景

三元运算符通常用于取值

```js
max = num1 > num2 ? num1 : num2
```

#### 6.2.3 switch 语句

##### 语法

```js
switch (数据) {
	case 值1: 
		代码1
		break
	case 值2: 
		代码2
		break
	default 
		代码n
		break
}
```

找到跟小括号里数据全等的case值，并执行里面对应的代码若没有全等`===`，的则执行default里的代码

##### 注意

- switch case语句一般用于等值判断，不适合于区间判断
- switch case一般需要配合break关键字使用，没有break会造成case穿透

#### 6.2.4 if 和 switch 的区别

##### 共同点

都能实现多分支选择，大部分情况下可以互换

##### 区别

- switch...case 语句通常处理为比较**确定值**的情况，而if...else...语句更加灵活，通常用于**范围判断**
- switch 语句进行判断后直接执行到程序的语句，效率更高，而if...slse语句有几种判断条件，就得判断多少次
- switch 必须是 `===` 全等，一定注意数据类型，并且如果未 break 会有穿透效果

- **当分支比较少时：if...else 语句执行效率高。**
- **当分支比较多时：switch 语句执行效率高，而且结构更清晰。**

### 6.3 循环语句

#### 6.3.1 断点调试

>浏览器开启断点调试

F12 -> 源代码 -> 代码文件

![image.png](https://raw.githubusercontent.com/michik0/notes-image/master/20230802231535.png)

#### 6.3.2 while 循环

while循环能在满足条件期间，重复执行某些代码。比如我们输出5次Hello World。

##### 语法

```js
while (循环条件) {
	// 重复执行的代码
}
```

while大括号里代码执行完毕后不会跳出，而是继续回到小括号里判断条件是否满足，若满足又执行大括号里的代码，然后再回到小括号判断条件，直到括号内条件不满足，即跳出。

##### 循环三要素

1. 变量起始值
2. 终止条件（没有终止条件，循环会一直执行，造成死循环）
3. 变量变化量（自增或者自减）

```js
let i = 1
while (i <= 3) {
	console.log('hello!')
	i++
}
```

#### 6.3.3 退出循环

- break：退出循环
- continue：结束本次循环，继续下一次循环

```js
while (条件1) {
	if (条件2) continue
	if (条件3) break
}
```

#### 6.3.4 for 语句

##### 语法

```js
for (变量起始值; 终止条件; 变量变化量) {
	// 循环体
}
```

## 7. 函数

### 7.1 为什么需要函数

#### 7.1.1 函数

function，是被设计为**执行特定任务**的代码块

#### 7.1.2 说明

函数可以把具有相同或相似逻辑的代码"包裹"起来，通过函数调用执行这些被"包裹"的代码逻辑，这么做的优势是有利于
**精简代码方便复用**。

### 7.2 函数使用

#### 7.2.1 声明

```js
function 函数名() {
	请求体
}
```

#### 7.2.2 函数名命名规范

- 和变量命名基本一致
- 尽量小驼峰式命名法
- 前缀应该为动词

| 动词 | 含义                   |
| ---- | ---------------------- |
| can  | 判断是否可执行某个动作 |
| has  | 判断是否含义某个值     |
| is   | 判断是否为某个值       |
| get  | 获取某个值             |
| set  | 设置某个值             |
| load | 加载某些数据 |

#### 7.2.3 使用

```js
函数名()
```

**注意**：声明(定义)的函数必须调用才会真正被执行，使用()调用函数**

### 7.3 函数传参

```js
function 函数名(参数1[, 参数2, 参数3 ... , 参数n]) {
	函数体
}
```

#### 7.3.1 形参和实参

```js
// num1、num2：形参
function getSum(num1, num2) {
	document.write(num+num2)
}

// 1、100：实参
getSum(1, 100)
```

形参：声明函数时写在函数名右边小括号里的叫形参(形式上的参数)
实参：调用函数时写在函数名右边小括号里的叫实参(实际上的参数)

形参可以理解为是在这个函数内声明的变量(比如 num1=10)实参可以理解为是给这个变量赋值

#### 7.3.2 参数默认值

>思考

Q：形参可以看做变量，但是如果一个变量不给值，默认是什么？

A：undefine，如果做用户不输入实参，undefine + undefine = NaN

>改造

我们可以改进下，用户不输入实参，可以给形参默认值，可以默认为0，这样程序更严谨，可以如下操作：

```js
function getSum(num1 = 0, num2 = 0) {
	document.write(num+num2)
}

// 1、100：实参
getSum(1, 100)
```

**注意**：这个默认值只会在缺少实参参数传递时才会被执行，所以有参数会优先执行传递过来的实参，否则默认为undefined

### 7.4 函数返回值

当调用某个函数，这个函数会返回一个结果。

当函数需要返回数据出去时，用 `return` 关键字

```js
function fn() {
	return 返回值
}
```

- 在函数体中使用return关键字能将内部的执行结果交给函数外部使用
- **return后面代码不会再被执行，会立即结束当前函数**
- **return函数可以没有return，这种情况函数默认返回值为undefined**

